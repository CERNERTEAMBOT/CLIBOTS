function dl_cb(arg, data) end function tdcli_update_callback(data) if (data.ID == "UpdateNewMessage") then local msg = data.message_ -- If the message is text message if msg.content_.ID == "MessageText" then -- And the text is... if msg.content_.text_ == "ping" then -- Reply with unformatted text tdcli.sendText(chat_id, msg.id_, 0, 1, nil, 'pong', 1, 'html') -- And if the text is... elseif msg.content_.text_ == "PING" then -- Reply with formatted text tdcli.sendText(chat_id, msg.id_, 0, 1, nil, '<b>PONG</b>', 1, 'html') end end elseif (data.ID == "UpdateOption" and data.name_ == "my_id") then tdcli_function ({ ID="GetChats", offset_order_="9223372036854775807", offset_chat_id_=0, limit_=20 }, dl_cb, nil) end end
